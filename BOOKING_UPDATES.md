# ุชุญุฏูุซุงุช ูุธุงู ุงูุญุฌุฒ - Guest Management & Room Availability

## โ ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. Backend Updates

#### Database:
- โ ุฃุถูุช ุญูู `guests_details` (JSON) ูู ุฌุฏูู `bookings`
- โ ูุฎุฒู ูุนูููุงุช ุฌููุน ุงูุถููู (ุงูุงุณูุ ุงูุจุฑูุฏุ ุงููุงุชู)

#### Booking Model:
- โ ุฃุถูุช `guests_details` ุฅูู `$fillable`
- โ ุฃุถูุช cast ูู `guests_details` ูู `array`

#### BookingController:
- โ **ุงูุชุญูู ูู ุณุนุฉ ุงูุบุฑูุฉ:** ูุชุญูู ุฃู ุนุฏุฏ ุงูุถููู ูุง ูุชุฌุงูุฒ `max_guests` ููุบุฑูุฉ
- โ **Validation ููุนูููุงุช ุงูุถููู:** ูุชุญูู ูู ุตุญุฉ ุจูุงูุงุช ุฌููุน ุงูุถููู
- โ **ุญูุธ ูุนูููุงุช ุฌููุน ุงูุถููู:** ูุญูุธ `guests_details` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. Frontend Updates

#### BookingCard Component:
- โ **ุชุญุฏูุฏ ุนุฏุฏ ุงูุถููู:** ุฃุฒุฑุงุฑ + ู - ูุชุญุฏูุฏ ุนุฏุฏ ุงูุถููู
- โ **Validation:** ุฑุณุงูุฉ ุชุญุฐูุฑ ุฅุฐุง ุชุฌุงูุฒ ุงูุนุฏุฏ ุณุนุฉ ุงูุบุฑูุฉ
- โ **Real-time update:** ุชุญุฏูุซ ุชููุงุฆู ููุชูุงุฑูุฎ ูุงูุถููู ูู ุงูุตูุญุฉ

#### RoomCard Component:
- โ **Validation ูุจู ุงูุญุฌุฒ:** ูุชุญูู ูู ุณุนุฉ ุงูุบุฑูุฉ ูุจู ุงูุชูุฌูู
- โ **Alert ูููุณุชุฎุฏู:** ุฑุณุงูุฉ ูุงุถุญุฉ ุฅุฐุง ูุงู ุงูุนุฏุฏ ุฃูุจุฑ ูู ุงูุณุนุฉ

#### BookingConfirmation Page:
- โ **ูููุฐุฌ ููู ุถูู:** ูุนุฑุถ ูููุฐุฌ ูููุตู ููู ุถูู
- โ **Primary Contact:** ุงูุถูู ุงูุฃูู ููุนุชุจุฑ ุฌูุฉ ุงูุงุชุตุงู ุงูุฑุฆูุณูุฉ
- โ **Required Fields:** ุฌููุน ุงูุญููู ูุทููุจุฉ ููู ุถูู
- โ **Validation:** ูุชุญูู ูู ููุก ุฌููุน ุงูุจูุงูุงุช ูุจู ุงูุฅุฑุณุงู

### 3. Room Availability Logic

#### ููู ูุนูู ุงููุธุงู:
1. **ุนูุฏ ุงูุจุญุซ:** `isAvailableForDates()` ูุชุญูู ูู ุงูุญุฌูุฒุงุช ุงููุชุฏุงุฎูุฉ
2. **ุนูุฏ ุงูุญุฌุฒ:** ูุชู ุฅูุดุงุก booking ุจุญุงูุฉ `pending`
3. **Booking Status:**
   - `pending` โ ุงูุบุฑูุฉ ูุญุฌูุฒุฉ ูุคูุชุงู (ูู ุงูุชุธุงุฑ ุงูุฏูุน)
   - `confirmed` โ ุงูุบุฑูุฉ ูุญุฌูุฒุฉ ููุคูุฏุฉ (ุจุนุฏ ุงูุฏูุน)
   - `cancelled` โ ุงูุบุฑูุฉ ูุชุงุญุฉ ูุฑุฉ ุฃุฎุฑู
   - `completed` โ ุงูุญุฌุฒ ุงูุชูู (ุจุนุฏ Check-out)

4. **ุงูุชููุฑ:** ุงูุบุฑูุฉ ุชููู ุบูุฑ ูุชููุฑุฉ ููุชูุงุฑูุฎ ุงููุญุฌูุฒุฉ ุจุญุงูุฉ `pending` ุฃู `confirmed`

## ๐ฏ ุชุฏูู ุงูุญุฌุฒ ุงูุฌุฏูุฏ

### ุงูุฎุทูุฉ 1: ุงุฎุชูุงุฑ ุงูุบุฑูุฉ
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงูุชูุงุฑูุฎ ูู `BookingCard`
2. ูุญุฏุฏ ุนุฏุฏ ุงูุถููู (ูุน validation ููุณุนุฉ)
3. ููุฒู ููุณู ุงูุบุฑู ููุฎุชุงุฑ ุบุฑูุฉ

### ุงูุฎุทูุฉ 2: ุชุฃููุฏ ุงูุญุฌุฒ
1. ูุชู ุงูุชูุฌูู ุฅูู `/booking/confirm`
2. **ูุนุฑุถ ูููุฐุฌ ููู ุถูู:**
   - Guest 1 (Primary Contact)
   - Guest 2
   - Guest 3
   - ... ุฅูุฎ
3. ูู ุถูู ูุฌุจ ุฅุฏุฎุงู:
   - Full Name
   - Email Address
   - Phone Number

### ุงูุฎุทูุฉ 3: ุงูุฏูุน
1. ุจุนุฏ ููุก ุฌููุน ุงูุจูุงูุงุช โ "Proceed to Payment"
2. ูุชู ุฅูุดุงุก ุงูุญุฌุฒ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุญุงูุฉ `pending`
3. **ุงูุบุฑูุฉ ุชุตุจุญ ุบูุฑ ูุชููุฑุฉ ููุชูุงุฑูุฎ ุงููุญุฏุฏุฉ**
4. ุงูุชูุฌูู ุฅูู ุตูุญุฉ ุงูุฏูุน

### ุงูุฎุทูุฉ 4: ุฅุชูุงู ุงูุฏูุน
1. ุงูุฏูุน ุนุจุฑ Stripe
2. ุนูุฏ ุงููุฌุงุญ: ุชุญุฏูุซ ุงูุญุฌุฒ ุฅูู `confirmed`
3. ุงูุบุฑูุฉ ุชุจูู ูุญุฌูุฒุฉ

## ๐ Validation Rules

### ุนุฏุฏ ุงูุถููู:
- โ ุงูุญุฏ ุงูุฃุฏูู: 1 ุถูู
- โ ุงูุญุฏ ุงูุฃูุตู: `room.max_guests`
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ุฅุฐุง ุชุฌุงูุฒ ุงูุนุฏุฏ

### ูุนูููุงุช ุงูุถููู:
- โ Name: ูุทููุจุ ูุตุ ุญุชู 255 ุญุฑู
- โ Email: ูุทููุจุ ุจุฑูุฏ ุตุญูุญ
- โ Phone: ูุทููุจุ ูุตุ ุญุชู 20 ุญุฑู

### ุงูุชูุงุฑูุฎ:
- โ Check-in: ูุฌุจ ุฃู ูููู ุงูููู ุฃู ุจุนุฏู
- โ Check-out: ูุฌุจ ุฃู ูููู ุจุนุฏ Check-in
- โ ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ูุชุฏุงุฎูุฉ

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุญุฌุฒ ูุดุฎุตูู
```
1. ุงุฎุชุฑ ุชูุงุฑูุฎ: 15 Dec - 20 Dec
2. ุญุฏุฏ ุนุฏุฏ ุงูุถููู: 2
3. ุงุฎุชุฑ ุบุฑูุฉ (ุณุนุฉ 4 ุฃุดุฎุงุต)
4. ุงููุฃ ูุนูููุงุช:
   - Guest 1: John Doe, john@email.com, +1234567890
   - Guest 2: Jane Doe, jane@email.com, +1234567891
5. ุงุฏูุน
```

### ูุซุงู 2: ูุญุงููุฉ ุญุฌุฒ ุฃูุซุฑ ูู ุงูุณุนุฉ
```
1. ุงุฎุชุฑ ุบุฑูุฉ ุณุนุชูุง 2 ุฃุดุฎุงุต
2. ุญุงูู ุชุญุฏูุฏ 3 ุถููู
3. โ ุฑุณุงูุฉ ุฎุทุฃ: "This room can accommodate maximum 2 guests"
4. ููู ุงูุนุฏุฏ ุฅูู 2
5. ุงุณุชูุฑ ูู ุงูุญุฌุฒ
```

### ูุซุงู 3: ุงูุชูุงุฑูุฎ ุงููุญุฌูุฒุฉ
```
1. ุบุฑูุฉ ูุญุฌูุฒุฉ ูู 10 Dec - 15 Dec
2. ูุญุงููุฉ ุญุฌุฒ ูู 12 Dec - 17 Dec
3. โ "Room is not available for the selected dates"
4. ุงุฎุชุฑ ุชูุงุฑูุฎ ุฃุฎุฑู: 16 Dec - 20 Dec
5. โ ูุชุงุญ
```

## ๐ก๏ธ ุงูุญูุงูุฉ ูุงูุฃูุงู

### Backend Validation:
- โ ุงูุชุญูู ูู ุณุนุฉ ุงูุบุฑูุฉ
- โ ุงูุชุญูู ูู ุชููุฑ ุงูุบุฑูุฉ
- โ Validation ูุฌููุน ุจูุงูุงุช ุงูุถููู
- โ ููุน ุงูุญุฌูุฒุงุช ุงููุชุฏุงุฎูุฉ

### Frontend Validation:
- โ Real-time validation ููุนุฏุฏ
- โ Required fields ููู ุถูู
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ ููุน ุงูุฅุฑุณุงู ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุงูุตุฉ

## ๐ ุจูุงูุงุช ุงูุญุฌุฒ ุงููุญููุธุฉ

```json
{
  "id": 1,
  "user_id": 1,
  "room_id": 5,
  "hotel_id": 3,
  "check_in_date": "2025-12-15",
  "check_out_date": "2025-12-20",
  "total_nights": 5,
  "guest_name": "John Doe",
  "guest_email": "john@email.com",
  "guest_phone": "+1234567890",
  "guests_count": 2,
  "guests_details": [
    {
      "id": 1,
      "name": "John Doe",
      "email": "john@email.com",
      "phone": "+1234567890"
    },
    {
      "id": 2,
      "name": "Jane Doe",
      "email": "jane@email.com",
      "phone": "+1234567891"
    }
  ],
  "price_per_night": 150.00,
  "subtotal": 750.00,
  "service_fee": 21.00,
  "taxes": 12.30,
  "total_amount": 783.30,
  "status": "confirmed"
}
```

## ๐จ UI/UX Improvements

### BookingCard:
- โ ุฃุฒุฑุงุฑ + ู - ูุงุถุญุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู
- โ ุนุฑุถ ุงูุนุฏุฏ ุจุดูู ุจุงุฑุฒ
- โ ุฑุณุงูุฉ ุชุญุฐูุฑ ุญูุฑุงุก ููุณุนุฉ ุงูุฒุงุฆุฏุฉ

### BookingConfirmation:
- โ ููุงุฐุฌ ูููุตูุฉ ููู ุถูู
- โ ุชุฑููู ูุงุถุญ (Guest 1, Guest 2, ...)
- โ ุชูููุฒ Primary Contact
- โ Borders ุจูู ุงูููุงุฐุฌ ูููุถูุญ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### ุชุญุณููุงุช ููุชุฑุญุฉ:
1. **Email Confirmation:** ุฅุฑุณุงู ุชุฃููุฏ ูุฌููุน ุงูุถููู
2. **Guest Profiles:** ุญูุธ ูุนูููุงุช ุงูุถููู ููุญุฌูุฒุงุช ุงููุณุชูุจููุฉ
3. **Group Bookings:** ุฏุนู ุญุฌุฒ ุนุฏุฉ ุบุฑู ูู ููุณ ุงูููุช
4. **Capacity Alerts:** ุชูุจูู ุฅุฐุง ุงูุชุฑุจุช ุงูุบุฑูุฉ ูู ุงูุณุนุฉ ุงููุตูู
5. **Guest Preferences:** ุญูุธ ุชูุถููุงุช ูู ุถูู (ููุน ุงูุณุฑูุฑุ ุงูุทุงุจูุ ...)

---

โ **ุฌููุน ุงูุชุญุฏูุซุงุช ูุทุจูุฉ ูุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ!**

<<<<<<< HEAD


=======
>>>>>>> origin/j-branch

